# 技术架构

::: tip 概述
本文档概述了本项目的技术架构决策和技术栈选择。
:::

## 技术栈

### 🎯 目标

::: info 性能与体验
- ⚡️ 极致的前端性能
  - 全平台满帧
  - 超低延迟
  - 离线支持
:::

::: info 安全与隐私
- 🔒 极致的数据安全性
  - 端对端加密
  - 本地加密
  - 多重密码保护
:::

::: info 跨平台支持
- 📱 全平台支持
  - 移动端: Android/iOS
  - 桌面端: Windows/MacOS/Linux
- 🔄 全平台端对端加密同步
  - 基于为本项目定制的日志文件功能实现
- 🌍 多语言支持
  - 基于 Flutter intl
:::

### 💫 前端技术
| 技术 | 选择 | 说明 |
|------|------|------|
| 框架 | Flutter | 为了极致的用户体验 |
| 开发语言 | Dart | Flutter 原生语言 |
| 状态管理 | flutter_bloc/get_it | 依赖注入与状态管理解决方案 |
| 本地数据库 | Objectbox | 目前唯一成熟的 Flutter 端侧向量数据库方案 |
| 国际化 | Flutter intl | 完整的多语言支持 |

### 🔧 后端技术
| 技术 | 选择 | 说明 |
|------|------|------|
| 开发语言 | TypeScript/Node.js | 类型安全的服务端开发 |
| 框架 | NestJS | 企业级 Node.js 框架 |
| 数据库 | PostgresSQL | 可靠的关系型数据库 |
| ORM | TypeORM | TypeScript 优先的 ORM |
| 认证 | Email Auth | 使用传统的邮件登录 |

### 🛠️ DevOps 与基础设施
| 技术 | 选择 |
|------|------|
| 版本控制 | Git |
| CI/CD | GitHub Actions |
| 部署 | Docker Compose |
| 云服务 | 路边的捡的 |

## 核心架构决策

### 1️⃣ 本地优先
::: tip 核心里念
- 大部分逻辑尽可能迁移至 Flutter 前端实现
- 不消耗后端性能
- 节约成本
- 保护用户隐私
:::

### 2️⃣ 巨石架构
::: warning 架构选择
- 后端功能实际上非常简单
- 请不要使用微服务
- 避免不必要的复杂性
:::

### 3️⃣ 安全性考虑
::: danger 安全重点
- 前端数据全部加密（主打一个安全性）
- 强制使用 HTTPS
- 生物识别验证
:::

## 开发指南

### 📁 代码组织
- 基于功能的文件夹结构
- 清晰的关注点分离
- 可复用组件和工具

### 🧪 测试策略
- 业务逻辑单元测试
- API 端点集成测试
- 关键用户流程端到端测试

### 📅 下一步计划
::: tip 迁移策略
- 制定 Node.js 逻辑迁移至 Flutter 的详细计划
- 实现核心安全功能
- 搭建跨平台开发环境
:::
