# 技术架构

## 概述
本文档概述了本项目的技术架构决策和技术栈选择。

## 技术栈

### 目标
- 极致的前端性能(全平台满帧,超低延迟,离线支持)
- 极致的数据安全性(端对端加密,本地加密,多重密码)
- 全平台支持(Android/iOS/Windows/MacOS/Linux)
- 全平台端对端加密同步支持(基于为本项目定制的日志文件功能实现)
- 多语言支持(基于Flutter intl)

### 前端
- 框架: Flutter(为了极致的用户体验)
- 开发语言: Dart
- 状态管理依赖注入: flutter_bloc/get_it
- 本地数据库实现: Objectbox(这是似乎是目前唯一成熟的flutter端侧向量数据库方案,sqlite性能不足)
- 国际化: Flutter intl

### 后端
- 开发语言：TypeScript/Node.js
- 框架：NestJS
- 数据库：PostgresSQL
- ORM：TypeORM
- 认证：使用传统的邮件登录

### DevOps 和基础设施
- 版本控制：Git
- CI/CD：GitHub Actions
- 部署：Docker Compose
- 云服务提供商: 路边的捡的

## 关键架构决策

### 1. 本地优先
- 大部分逻辑尽可能迁移至Flutter前端实现,不要消耗后端性能(节约成本,保护用户隐私)

### 2. 巨石架构
- 后端功能实际上非常简单,请不要使用微服务,避免不必要的复杂性

### 3. 安全性考虑
- 前端数据全部加密加密加密(主打一个安全性)
- 强制使用 HTTPS
- 生物识别验证

## 开发指南

### 代码组织
- 基于功能的文件夹结构
- 清晰的关注点分离
- 可复用组件和工具

### 测试策略
- 业务逻辑单元测试
- API 端点集成测试
- 关键用户流程端到端测试

### 下一步计划
- 迁移nodejs逻辑至flutter策略
